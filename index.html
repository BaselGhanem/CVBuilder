<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Basel | Cinematic Experience</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* * --------------------------------------------------------------------------
         * SYSTEM ARCHITECTURE: CORE VARIABLES
         * --------------------------------------------------------------------------
         */
        :root {
            --bg-deep: #050507;
            --bg-panel: rgba(20, 20, 25, 0.7);
            
            /* Brand Colors - Electric Violet Core */
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --primary-glow: rgba(139, 92, 246, 0.5);
            --accent-cyan: #06b6d4;
            --accent-pink: #ec4899;
            
            /* Glassmorphism System */
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shine: rgba(255, 255, 255, 0.03);
            --glass-blur: blur(24px);
            
            /* Text Hierarchy */
            --text-main: #f8fafc;
            --text-secondary: #94a3b8;
            --text-placeholder: #64748b;
            
            /* Animation Curves */
            --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-smooth: cubic-bezier(0.16, 1, 0.3, 1);
            --duration-fast: 0.3s;
            --duration-med: 0.6s;
        }

        /* Reset & Base */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            opacity: 0; /* For Initial Load Animation */
            animation: systemBoot 1s var(--ease-smooth) forwards;
        }

        @keyframes systemBoot { to { opacity: 1; } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }

        /* * --------------------------------------------------------------------------
         * VISUAL FX: ATMOSPHERE & PARTICLES
         * --------------------------------------------------------------------------
         */
        .cinematic-noise {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)" opacity="0.04"/%3E%3C/svg%3E');
            pointer-events: none; z-index: 0; opacity: 0.6;
        }

        .aurora-glow {
            position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.08), transparent 40%),
                        radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.05), transparent 40%);
            z-index: -1;
            animation: auroraMove 20s infinite alternate ease-in-out;
            pointer-events: none;
        }

        @keyframes auroraMove {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(-2%, 2%) scale(1.05); }
        }

        /* * --------------------------------------------------------------------------
         * LAYOUT: SPLIT STUDIO
         * --------------------------------------------------------------------------
         */
        .studio-layout {
            display: grid;
            grid-template-columns: 500px 1fr;
            width: 100%; height: 100%;
            position: relative; z-index: 10;
        }

        /* * --------------------------------------------------------------------------
         * ZONE 1: THE EDITOR (Left)
         * --------------------------------------------------------------------------
         */
        .editor-zone {
            background: var(--bg-panel);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-left: 1px solid var(--glass-border);
            display: flex; flex-direction: column;
            position: relative;
            box-shadow: 20px 0 50px rgba(0,0,0,0.5);
        }

        /* Header Area */
        .brand-header {
            padding: 30px 40px;
            border-bottom: 1px solid var(--glass-border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { 
            font-size: 1.6rem; font-weight: 900; letter-spacing: -0.5px; 
            display: flex; align-items: center; gap: 12px;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .step-indicator {
            background: rgba(255,255,255,0.05); padding: 5px 12px; 
            border-radius: 20px; font-size: 0.85rem; border: 1px solid var(--glass-border);
        }

        /* Progress Bar */
        .progress-track { height: 2px; background: rgba(255,255,255,0.05); width: 100%; }
        .progress-fill { 
            height: 100%; background: linear-gradient(90deg, var(--primary), var(--accent-cyan)); 
            width: 0%; transition: width 0.8s var(--ease-elastic);
            box-shadow: 0 0 15px var(--primary-glow);
            position: relative;
        }
        .progress-fill::after {
            content: ''; position: absolute; right: 0; top: -4px; width: 10px; height: 10px;
            background: #fff; border-radius: 50%; box-shadow: 0 0 10px #fff;
        }

        /* Form Area */
        .steps-viewport {
            flex: 1; padding: 40px; overflow-y: auto; overflow-x: hidden;
            display: flex; flex-direction: column; 
            /* scroll-behavior: smooth; Not used due to JS control */
        }

        .step-slide {
            display: none; opacity: 0;
            animation: slideUpFade 0.6s var(--ease-smooth) forwards;
        }
        .step-slide.active { display: block; }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Typography */
        h2 { 
            font-size: 2.5rem; margin-bottom: 10px; font-weight: 800; line-height: 1.1; 
            background: linear-gradient(135deg, #fff 0%, #cbd5e1 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        p.desc { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 40px; font-weight: 300; }

        /* Advanced Inputs (Floating Label) */
        .input-group { position: relative; margin-bottom: 30px; }
        
        .floating-input {
            width: 100%; padding: 18px 20px;
            font-size: 1.1rem; background: rgba(255,255,255,0.02);
            border: 1px solid var(--glass-border);
            border-radius: 14px; color: #fff; font-family: inherit;
            transition: all 0.3s ease;
        }
        .floating-input:focus {
            background: rgba(139, 92, 246, 0.05);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.15);
            transform: translateY(-2px);
        }
        .floating-label {
            position: absolute; right: 20px; top: 18px;
            color: var(--text-placeholder); pointer-events: none;
            transition: 0.3s var(--ease-elastic); font-size: 1.1rem;
        }
        .floating-input:focus ~ .floating-label,
        .floating-input:not(:placeholder-shown) ~ .floating-label {
            top: -12px; right: 10px; font-size: 0.85rem;
            color: var(--primary); background: var(--bg-deep);
            padding: 0 8px; border-radius: 4px;
        }

        /* Avatar Future-Tech */
        .avatar-uploader {
            width: 150px; height: 150px; margin: 0 auto 50px;
            border-radius: 50%; position: relative; cursor: pointer;
            background: var(--glass-shine);
            border: 2px dashed var(--glass-border);
            transition: all 0.4s var(--ease-elastic);
            overflow: hidden; group;
        }
        .avatar-uploader:hover { border-color: var(--primary); transform: scale(1.05) rotate(5deg); }
        .avatar-uploader img { width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: 0.3s; }
        .avatar-uploader.has-img img { opacity: 1; }
        .upload-icon {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
            font-size: 2rem; color: var(--text-secondary); transition: 0.3s;
        }
        .avatar-uploader.has-img .upload-icon { opacity: 0; }

        /* Dynamic List Items (Cards) */
        .mini-card {
            background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
            border: 1px solid var(--glass-border);
            padding: 20px; border-radius: 12px; margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center;
            animation: popIn 0.4s var(--ease-elastic);
            transition: 0.3s;
        }
        .mini-card:hover { border-color: var(--text-secondary); transform: translateX(-5px); }
        
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Control Bar */
        .control-bar {
            padding: 30px 40px; display: flex; gap: 20px;
            background: rgba(0,0,0,0.3); border-top: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }
        
        /* Magnetic Buttons */
        .btn {
            padding: 18px 30px; border-radius: 14px; font-size: 1rem; font-weight: 700;
            cursor: pointer; border: none; transition: all 0.3s ease;
            position: relative; overflow: hidden;
        }
        .btn-primary { 
            background: var(--primary); color: white; flex: 2;
            box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4);
        }
        .btn-primary:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.6);
            background: #8b5cf6;
        }
        .btn-ghost { 
            background: transparent; color: var(--text-secondary); flex: 1;
            border: 1px solid var(--glass-border);
        }
        .btn-ghost:hover { border-color: white; color: white; background: rgba(255,255,255,0.05); }

        .btn:active { transform: scale(0.98); }

        /* * --------------------------------------------------------------------------
         * ZONE 2: THE PREVIEW (Right - 3D Space)
         * --------------------------------------------------------------------------
         */
        .preview-zone {
            display: flex; align-items: center; justify-content: center;
            background: transparent;
            perspective: 1500px; /* Deep perspective */
            overflow: hidden;
            cursor: grab;
        }
        .preview-zone:active { cursor: grabbing; }

        .paper-3d-wrapper {
            width: 210mm; min-height: 297mm;
            background: #ffffff; color: #1e293b;
            transform-style: preserve-3d;
            transform: scale(0.65) rotateX(0deg) rotateY(0deg);
            box-shadow: 
                0 0 0 1px rgba(0,0,0,0.05),
                0 20px 50px rgba(0,0,0,0.4),
                0 50px 100px -20px rgba(0,0,0,0.6);
            border-radius: 4px;
            transition: transform 0.1s linear; /* Smooth mouse follow */
            position: relative;
        }

        /* Resume Content Styling */
        .res-container { height: 100%; display: flex; flex-direction: column; }
        .res-header { 
            background: #1e293b; color: white; padding: 50px; 
            display: flex; gap: 30px; align-items: center; 
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
        }
        .res-photo { 
            width: 120px; height: 120px; border-radius: 50%; object-fit: cover; 
            border: 5px solid rgba(255,255,255,0.1); 
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            display: none;
        }
        .res-body { padding: 40px 50px; display: grid; grid-template-columns: 2fr 1.2fr; gap: 40px; }
        
        .res-section-title {
            font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px;
            color: #64748b; border-bottom: 2px solid #e2e8f0; 
            padding-bottom: 10px; margin-bottom: 20px; font-weight: 800;
        }
        
        /* * --------------------------------------------------------------------------
         * UTILITIES & MOBILE
         * --------------------------------------------------------------------------
         */
        .toast-container {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 2000; pointer-events: none;
        }
        .toast {
            background: rgba(20, 20, 25, 0.9); backdrop-filter: blur(10px);
            border: 1px solid var(--primary); color: white;
            padding: 12px 25px; border-radius: 30px;
            margin-bottom: 10px; display: flex; align-items: center; gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: toastIn 0.4s var(--ease-elastic);
        }
        @keyframes toastIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* Mobile Adaptation */
        @media (max-width: 1024px) {
            .studio-layout { display: block; }
            .preview-zone { 
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: #000; z-index: 999; 
                transform: translateY(100%); transition: transform 0.5s var(--ease-elastic);
                display: flex; opacity: 0;
            }
            .preview-zone.show-mobile { transform: translateY(0); opacity: 1; }
            .paper-3d-wrapper { transform: scale(0.48) !important; margin-top: 20px; }
            
            .editor-zone { width: 100%; height: 100vh; border: none; }
            .brand-header { padding: 20px; }
            .steps-viewport { padding: 20px; }
            h2 { font-size: 2rem; }
            
            .mobile-fab {
                position: fixed; bottom: 100px; left: 20px; z-index: 100;
                width: 50px; height: 50px; border-radius: 50%;
                background: var(--primary); color: white; border: none;
                box-shadow: 0 10px 20px rgba(124, 58, 237, 0.5);
                display: flex; align-items: center; justify-content: center;
                font-size: 1.2rem; cursor: pointer;
            }
        }
        .mobile-fab { display: none; }
        @media (max-width: 1024px) { .mobile-fab { display: flex; } }

        /* Print Logic */
        @media print {
            body > *:not(.preview-zone) { display: none; }
            .preview-zone { position: absolute; top:0; left:0; width:100%; height:auto; display:block; background:white; transform:none; opacity:1; perspective:none; overflow:visible; }
            .paper-3d-wrapper { transform: none !important; box-shadow: none; margin: 0; width: 100%; height: auto; border-radius: 0; }
            .res-container { width: 100%; }
            @page { margin: 0; size: auto; }
        }
    </style>
</head>
<body>

    <div class="cinematic-noise"></div>
    <div class="aurora-glow"></div>
    <div class="toast-container" id="toastArea"></div>

    <div class="studio-layout">
        
        <div class="editor-zone">
            <div class="brand-header">
                <div class="logo">
                    <i class="fa-solid fa-cube" style="color:var(--primary)"></i> BASEL<span style="font-weight:200">BUILD</span>
                </div>
                <div class="step-indicator"><span id="currStep">1</span> / 5</div>
            </div>
            
            <div class="progress-track"><div class="progress-fill" id="progressBar"></div></div>

            <div class="steps-viewport">
                
                <div class="step-slide active" id="step1">
                    <h2>Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h2>
                    <p class="desc">Ø§Ù„Ø¥Ù†Ø·Ø¨Ø§Ø¹ Ø§Ù„Ø£ÙˆÙ„ Ù‡Ùˆ Ø§Ù„Ø£Ø®ÙŠØ±. Ù„Ù†ØµÙ†Ø¹ Ù‡ÙˆÙŠØ© Ø¨ØµØ±ÙŠØ© Ù‚ÙˆÙŠØ©.</p>
                    
                    <div class="avatar-uploader" id="avatarBox" onclick="document.getElementById('fileIn').click()">
                        <img id="imgPreview" alt="Profile">
                        <i class="fa-solid fa-camera upload-icon"></i>
                        <input type="file" id="fileIn" hidden accept="image/*" onchange="app.handleImage(this)">
                    </div>

                    <div class="input-group">
                        <input type="text" id="inName" class="floating-input" placeholder=" " oninput="app.sync()">
                        <label class="floating-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    </div>
                    <div class="input-group">
                        <input type="text" id="inTitle" class="floating-input" placeholder=" " oninput="app.sync()">
                        <label class="floating-label">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ (Ø§Ù„ØªØ®ØµØµ)</label>
                    </div>
                </div>

                <div class="step-slide" id="step2">
                    <h2>Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h2>
                    <p class="desc">ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¹Ø§Ù„Ù… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙƒØŸ</p>
                    <div class="input-group">
                        <input type="tel" id="inPhone" class="floating-input" placeholder=" " oninput="app.sync()">
                        <label class="floating-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    </div>
                    <div class="input-group">
                        <input type="email" id="inEmail" class="floating-input" placeholder=" " oninput="app.sync()">
                        <label class="floating-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    </div>
                    <div class="input-group">
                        <input type="text" id="inLoc" class="floating-input" placeholder=" " oninput="app.sync()">
                        <label class="floating-label">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
                    </div>
                </div>

                <div class="step-slide" id="step3">
                    <h2>Ø§Ù„Ù†Ø¨Ø°Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</h2>
                    <p class="desc">Ù„Ø¯ÙŠÙƒ 3 Ø«ÙˆØ§Ù†Ù ÙÙ‚Ø· Ù„Ø¬Ø°Ø¨ Ø§Ù†ØªØ¨Ø§Ù‡ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ØªÙˆØ¸ÙŠÙ.</p>
                    <div class="input-group">
                        <textarea id="inSum" class="floating-input" rows="6" placeholder=" " oninput="app.sync()" style="min-height: 150px; line-height:1.6"></textarea>
                        <label class="floating-label">Ø§ÙƒØªØ¨ Ù…Ù„Ø®ØµØ§Ù‹ Ø§Ø­ØªØ±Ø§ÙÙŠØ§Ù‹...</label>
                    </div>
                </div>

                <div class="step-slide" id="step4">
                    <h2>Ø§Ù„Ø®Ø¨Ø±Ø§Øª ÙˆØ§Ù„Ù‚Ø¯Ø±Ø§Øª</h2>
                    <p class="desc">Ø³Ø¬Ù„ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒØŒ Ù„Ø§ Ù…Ù‡Ø§Ù…Ùƒ ÙÙ‚Ø·.</p>
                    
                    <div id="expListContainer"></div>
                    
                    <button class="btn btn-ghost" onclick="document.getElementById('expForm').style.display='block'" style="width:100%; border-style:dashed; margin-bottom:20px">
                        <i class="fa-solid fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </button>

                    <div id="expForm" style="display:none; background:rgba(255,255,255,0.03); padding:20px; border-radius:12px; margin-bottom:30px; border:1px solid var(--primary)">
                        <input id="newRole" class="floating-input" placeholder="Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ" style="margin-bottom:10px">
                        <input id="newComp" class="floating-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©" style="margin-bottom:10px">
                        <textarea id="newDesc" class="floating-input" placeholder="Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª..." rows="3" style="margin-bottom:10px"></textarea>
                        <div style="display:flex; gap:10px">
                            <button onclick="app.addExp()" class="btn btn-primary">Ø­ÙØ¸</button>
                            <button onclick="document.getElementById('expForm').style.display='none'" class="btn btn-ghost">Ø¥Ù„ØºØ§Ø¡</button>
                        </div>
                    </div>

                    <div class="input-group" style="margin-top:20px">
                        <div style="display:flex; gap:10px">
                            <input id="newSkill" class="floating-input" placeholder=" " onkeydown="if(event.key==='Enter') app.addSkill()">
                            <label class="floating-label">Ø£Ø¶Ù Ù…Ù‡Ø§Ø±Ø© (Enter)</label>
                            <button onclick="app.addSkill()" class="btn btn-primary" style="padding:0 20px"><i class="fa-solid fa-plus"></i></button>
                        </div>
                    </div>
                    <div id="skillsListContainer" style="display:flex; flex-wrap:wrap; gap:10px"></div>
                </div>

                <div class="step-slide" id="step5">
                    <div style="text-align:center; padding-top:60px">
                        <div style="position:relative; width:100px; height:100px; margin:0 auto 30px;">
                            <i class="fa-solid fa-check-circle" style="font-size:5rem; color:var(--primary); animation: pulse 2s infinite"></i>
                        </div>
                        <h2>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…ÙƒØªÙ…Ù„!</h2>
                        <p class="desc">Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚. Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ø§Ù„Ø¢Ù†.</p>
                        
                        <button onclick="window.print()" class="btn btn-primary" style="width:100%; font-size:1.2rem; padding:25px">
                            <i class="fa-solid fa-file-pdf"></i> ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù PDF
                        </button>
                    </div>
                </div>

            </div>

            <div class="control-bar">
                <button class="btn btn-ghost" id="btnPrev" onclick="app.nav(-1)">Ø±Ø¬ÙˆØ¹</button>
                <button class="btn btn-primary" id="btnNext" onclick="app.nav(1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>

        <div class="preview-zone" id="previewStage">
            <button onclick="app.toggleMobileView()" style="position:fixed; top:20px; right:20px; z-index:2000; padding:10px 15px; border-radius:50px; border:none; background:white; color:black; font-weight:bold; display:none" id="closeMobBtn">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>

            <div class="paper-3d-wrapper" id="paper3d">
                <div class="res-container">
                    <div class="res-header">
                        <img id="resImg" class="res-photo">
                        <div>
                            <h1 id="resName" style="font-size:2.8rem; margin:0; line-height:1; font-weight:800">Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§</h1>
                            <p id="resTitle" style="font-size:1.4rem; opacity:0.9; margin-top:8px; font-weight:300; letter-spacing:1px">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</p>
                        </div>
                    </div>
                    
                    <div class="res-body">
                        <div>
                            <div class="res-section-title">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div>
                            <p id="resSum" style="line-height:1.8; color:#334155; margin-bottom:40px; white-space: pre-line;">...</p>
                            
                            <div class="res-section-title">Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</div>
                            <div id="resExpDisplay"></div>
                        </div>
                        
                        <div style="border-right: 1px solid #e2e8f0; padding-right: 30px; margin-right: -30px;">
                            <div class="res-section-title">ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ</div>
                            <div id="resContactDisplay" style="font-size:0.95rem; color:#334155; line-height:2.2"></div>

                            <div class="res-section-title" style="margin-top:40px">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</div>
                            <div id="resSkillsDisplay" style="display:flex; flex-wrap:wrap; gap:8px"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="mobile-fab" onclick="app.toggleMobileView()"><i class="fa-solid fa-eye"></i></button>

    </div>

    <script>
        /**
         * --------------------------------------------------------------------------
         * APP ARCHITECTURE: SINGLETON PATTERN
         * Basel's Standard: Modular, Clean, Scalable.
         * --------------------------------------------------------------------------
         */
        const app = {
            state: {
                step: 1,
                totalSteps: 5,
                data: {
                    exp: [],
                    skills: []
                }
            },

            // === INITIALIZATION ===
            init() {
                this.loadFromStorage();
                this.setup3DEffect();
                this.renderUI();
                this.showToast('ğŸš€ System Ready. Welcome Back.', 'info');
                
                // Add Entrance Animations to inputs
                document.querySelectorAll('.floating-input').forEach((el, i) => {
                    el.style.animation = `slideUpFade 0.5s ease forwards ${i * 0.1}s`;
                    el.style.opacity = '0'; // Start hidden
                });
            },

            // === NAVIGATION LOGIC ===
            nav(dir) {
                const nextStep = this.state.step + dir;
                if(nextStep < 1 || nextStep > this.state.totalSteps) return;

                // Validation Logic
                if(dir === 1 && !this.validateStep(this.state.step)) return;

                // Animation OUT
                const currentSlide = document.getElementById(`step${this.state.step}`);
                currentSlide.style.animation = 'slideUpFade 0.4s ease reverse forwards';
                
                setTimeout(() => {
                    currentSlide.classList.remove('active');
                    this.state.step = nextStep;
                    
                    // Animation IN
                    const nextSlide = document.getElementById(`step${this.state.step}`);
                    nextSlide.classList.add('active');
                    nextSlide.style.animation = 'slideUpFade 0.6s var(--ease-smooth) forwards';
                    
                    this.updateControls();
                    this.saveToStorage();
                }, 400);
            },

            validateStep(step) {
                // Simple validation example for Step 1
                if(step === 1) {
                    const name = document.getElementById('inName').value;
                    if(!name) {
                        this.showToast('âš ï¸ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©', 'error');
                        document.getElementById('inName').focus();
                        return false;
                    }
                }
                return true;
            },

            updateControls() {
                // Progress Bar
                const pct = ((this.state.step - 1) / (this.state.totalSteps - 1)) * 100;
                document.getElementById('progressBar').style.width = `${pct}%`;
                document.getElementById('currStep').innerText = this.state.step;

                // Buttons
                const btnPrev = document.getElementById('btnPrev');
                const btnNext = document.getElementById('btnNext');
                
                btnPrev.style.opacity = this.state.step === 1 ? '0' : '1';
                btnPrev.style.pointerEvents = this.state.step === 1 ? 'none' : 'all';
                
                btnNext.innerHTML = this.state.step === this.state.totalSteps ? 'Ø¥Ù†Ù‡Ø§Ø¡ <i class="fa-solid fa-check"></i>' : 'Ø§Ù„ØªØ§Ù„ÙŠ';
                if(this.state.step === this.state.totalSteps) btnNext.style.display = 'none';
                else btnNext.style.display = 'block';
            },

            // === DATA SYNC & RENDERING ===
            sync() {
                // Text Fields
                const map = {
                    'inName': 'resName',
                    'inTitle': 'resTitle',
                    'inSum': 'resSum'
                };
                
                for(let [id, target] of Object.entries(map)) {
                    const val = document.getElementById(id).value;
                    document.getElementById(target).innerText = val || (id==='inName'?'Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§':(id==='inTitle'?'Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ':'...'));
                }

                // Contact Construction
                const phone = document.getElementById('inPhone').value;
                const email = document.getElementById('inEmail').value;
                const loc = document.getElementById('inLoc').value;
                
                let contactHTML = '';
                if(phone) contactHTML += `<div><i class="fa-solid fa-phone" style="width:20px;color:#64748b"></i> ${phone}</div>`;
                if(email) contactHTML += `<div><i class="fa-solid fa-envelope" style="width:20px;color:#64748b"></i> ${email}</div>`;
                if(loc) contactHTML += `<div><i class="fa-solid fa-location-dot" style="width:20px;color:#64748b"></i> ${loc}</div>`;
                
                document.getElementById('resContactDisplay').innerHTML = contactHTML;
                
                this.saveToStorage();
            },

            // === COMPLEX DATA HANDLING (Exp & Skills) ===
            addExp() {
                const role = document.getElementById('newRole').value;
                const comp = document.getElementById('newComp').value;
                const desc = document.getElementById('newDesc').value;

                if(!role || !comp) {
                    this.showToast('â— Ø§Ù„Ù…Ø³Ù…Ù‰ ÙˆØ§Ù„Ø´Ø±ÙƒØ© Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                    return;
                }

                this.state.data.exp.push({role, comp, desc});
                this.resetForm('expForm');
                document.getElementById('expForm').style.display = 'none';
                this.renderLists();
                this.showToast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¨Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­');
                this.saveToStorage();
            },

            addSkill() {
                const skill = document.getElementById('newSkill').value;
                if(!skill) return;
                
                this.state.data.skills.push(skill);
                document.getElementById('newSkill').value = '';
                this.renderLists();
                this.saveToStorage();
            },

            deleteItem(type, index) {
                this.state.data[type].splice(index, 1);
                this.renderLists();
                this.saveToStorage();
                this.showToast('ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ø­Ø°Ù');
            },

            renderLists() {
                // Editor: Exp
                document.getElementById('expListContainer').innerHTML = this.state.data.exp.map((x, i) => `
                    <div class="mini-card">
                        <div>
                            <div style="font-weight:700; font-size:1.1rem">${x.role}</div>
                            <div style="font-size:0.9rem; color:var(--text-secondary)">${x.comp}</div>
                        </div>
                        <i class="fa-solid fa-trash" style="color:#ef4444; cursor:pointer; padding:10px" onclick="app.deleteItem('exp', ${i})"></i>
                    </div>
                `).join('');

                // Preview: Exp
                document.getElementById('resExpDisplay').innerHTML = this.state.data.exp.map(x => `
                    <div style="margin-bottom:20px">
                        <div style="display:flex; justify-content:space-between; align-items:baseline">
                            <h3 style="margin:0; font-size:1.1rem; color:#1e293b">${x.role}</h3>
                            <span style="font-size:0.9rem; color:#7c3aed; font-weight:600">${x.comp}</span>
                        </div>
                        <p style="margin-top:5px; font-size:0.95rem; color:#475569; line-height:1.5">${x.desc}</p>
                    </div>
                `).join('');

                // Editor: Skills
                document.getElementById('skillsListContainer').innerHTML = this.state.data.skills.map((x, i) => `
                    <span style="background:rgba(255,255,255,0.1); padding:8px 15px; border-radius:20px; font-size:0.9rem; border:1px solid var(--glass-border); display:inline-flex; align-items:center; gap:8px">
                        ${x} <i class="fa-solid fa-xmark" style="cursor:pointer; opacity:0.6" onclick="app.deleteItem('skills', ${i})"></i>
                    </span>
                `).join('');

                // Preview: Skills
                document.getElementById('resSkillsDisplay').innerHTML = this.state.data.skills.map(x => `
                    <span style="background:#f1f5f9; color:#334155; padding:5px 10px; border-radius:6px; font-size:0.85rem; font-weight:600">${x}</span>
                `).join('');
            },

            // === IMAGE PROCESSING ===
            handleImage(input) {
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const imgData = e.target.result;
                        // Editor View
                        const pv = document.getElementById('imgPreview');
                        pv.src = imgData;
                        document.getElementById('avatarBox').classList.add('has-img');
                        
                        // Resume View
                        const resImg = document.getElementById('resImg');
                        resImg.src = imgData;
                        resImg.style.display = 'block';
                        
                        // Save (Warning: LocalStorage limit might be hit with large images, used simplified here)
                        try {
                            localStorage.setItem('basel_res_img', imgData);
                        } catch(e) { console.warn('Image too large to save'); }
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            },

            // === UI HELPERS ===
            showToast(msg, type='success') {
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.innerHTML = type==='error' ? `<i class="fa-solid fa-triangle-exclamation" style="color:#ef4444"></i> ${msg}` : `<i class="fa-solid fa-circle-check" style="color:#10b981"></i> ${msg}`;
                
                document.getElementById('toastArea').appendChild(toast);
                
                // Haptic Feedback (Mobile)
                if(navigator.vibrate) navigator.vibrate(type==='error'?200:50);

                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateY(-20px)';
                    setTimeout(() => toast.remove(), 400);
                }, 3000);
            },

            resetForm(id) {
                document.querySelectorAll(`#${id} input, #${id} textarea`).forEach(el => el.value = '');
            },

            toggleMobileView() {
                const z = document.getElementById('previewStage');
                const btn = document.getElementById('closeMobBtn');
                if(z.classList.contains('show-mobile')) {
                    z.classList.remove('show-mobile');
                    btn.style.display = 'none';
                } else {
                    z.classList.add('show-mobile');
                    btn.style.display = 'block';
                }
            },

            // === 3D EFFECT ENGINE (The "Cinematic" Part) ===
            setup3DEffect() {
                const container = document.getElementById('previewStage');
                const paper = document.getElementById('paper3d');
                
                if(!container || window.innerWidth < 1024) return;

                container.addEventListener('mousemove', (e) => {
                    const xAxis = (window.innerWidth / 2 - e.pageX) / 40;
                    const yAxis = (window.innerHeight / 2 - e.pageY) / 40;
                    paper.style.transform = `scale(0.65) rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
                });

                container.addEventListener('mouseleave', () => {
                    paper.style.transform = `scale(0.65) rotateY(0deg) rotateX(0deg)`;
                });
            },

            // === STORAGE ENGINE ===
            saveToStorage() {
                const data = {
                    name: document.getElementById('inName').value,
                    title: document.getElementById('inTitle').value,
                    phone: document.getElementById('inPhone').value,
                    email: document.getElementById('inEmail').value,
                    loc: document.getElementById('inLoc').value,
                    sum: document.getElementById('inSum').value,
                    exp: this.state.data.exp,
                    skills: this.state.data.skills
                };
                localStorage.setItem('basel_res_data', JSON.stringify(data));
            },

            loadFromStorage() {
                const saved = localStorage.getItem('basel_res_data');
                const savedImg = localStorage.getItem('basel_res_img');
                
                if(saved) {
                    const d = JSON.parse(saved);
                    document.getElementById('inName').value = d.name || '';
                    document.getElementById('inTitle').value = d.title || '';
                    document.getElementById('inPhone').value = d.phone || '';
                    document.getElementById('inEmail').value = d.email || '';
                    document.getElementById('inLoc').value = d.loc || '';
                    document.getElementById('inSum').value = d.sum || '';
                    this.state.data.exp = d.exp || [];
                    this.state.data.skills = d.skills || [];
                    
                    this.sync();
                    this.renderLists();
                }
                
                if(savedImg) {
                    document.getElementById('imgPreview').src = savedImg;
                    document.getElementById('resImg').src = savedImg;
                    document.getElementById('resImg').style.display = 'block';
                    document.getElementById('avatarBox').classList.add('has-img');
                }
            }
        };

        // Boot
        window.addEventListener('DOMContentLoaded', () => app.init());

    </script>
</body>
</html>
